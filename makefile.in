objdir = obj
srcdir = src
bindir = bin
asm = fasm
sources = loader.fasm init.fasm
objects = ${addprefix ${objdir}/, ${sources:.fasm=.bin}}
executable = os.bin

all: ${executable}

clean:
	-@rm ${objdir}/* ${bindir}/${executable}

${objdir}/loader.bin: ${srcdir}/loader.fasm
	${asm} $< $@

${objdir}/init.bin: ${srcdir}/init.fasm
	${asm} $< $@

${executable}: ${objects}
	cat ${objects} > ${bindir}/$@

.PHONY: all clean
